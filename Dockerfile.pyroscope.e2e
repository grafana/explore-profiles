FROM docker.io/grafana/pyroscope:latest

USER root

COPY samples/static/pyroscope/* /etc/pyroscope

COPY samples/static/grafana-pyroscope-sample-blocks-public.zip /
RUN unzip grafana-pyroscope-sample-blocks-public.zip 
RUN mv grafana-pyroscope-sample-blocks-public data-shared
RUN rm grafana-pyroscope-sample-blocks-public.zip

ENTRYPOINT ["/usr/bin/pyroscope"]
CMD ["-config.file=/etc/pyroscope/config.yaml"]
